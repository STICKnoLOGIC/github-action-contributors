name: test
on: [push]

jobs:
  test:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
        with:
          node-version: 14
      - run: npm install
      - run: npm run build
      - run: mkdir -p build
      - run: npm i markdown-to-html-cli -g
      - run: markdown-to-html --output build/index.html --favicon 'data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üèûÔ∏è</text></svg>'

      - name: Generate Contributors Images
        # uses: jaywcjlove/github-action-contributors@main
        uses: ./
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          filter-author: 'renovate\\[bot\\]'
          output: build/CONTRIBUTORS.svg

      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./coverage

      - run: ls -al